<script setup lang="ts">
const props = defineProps({
  cardContent: {}
})
let cardId = ''
function getRandomInt(min, max) {
  min = Math.ceil(min)
  max = Math.floor(max)
  return Math.floor(Math.random() * (max - min + 1)) + min
}
function createId() {
  cardId = 'card-' + getRandomInt(1000, 9999)
}

function isEmpty(obj: object): boolean {
  return Object.keys(obj).length === 0
}

createId()
</script>
<template>
  <div class="col-sm-12 col-md-6 col-lg-4 mb-3">
    <div
      class="card small bg-gradient-dark text-white-50 border border-1"
      v-if="!isEmpty(cardContent)"
    >
      <div class="card-body">
        <div class="row">
          <div class="col-11">
            <h4 class="card-title">
              <span class="text-white">{{ cardContent.position }}</span> <br /><span
                class="small"
                >{{ cardContent.company_name }}</span
              >
            </h4>
            <h4 class="small">
              {{ cardContent.company_location }} - {{ cardContent.country }} ({{
                cardContent.country_code
              }})
            </h4>
            <h6 class="small">
              From: {{ cardContent.date_from }}
              <span v-if="cardContent.date_until"> - {{ cardContent.date_until }} </span>
            </h6>
          </div>
          <div class="col-1 text-end">
            <a
              class="link"
              data-bs-toggle="collapse"
              :href="'#' + cardId"
              role="button"
              aria-expanded="false"
              :aria-controls="cardId"
              ><i class="bi bi-caret-down"></i
            ></a>
          </div>
        </div>

        <div class="collapse multi-collapse" :id="cardId">
          <div class="col-12 mt-3">
            <h5 class="small text-white text-uppercase">Responsibilities:</h5>
            <p
              class="my-0"
              v-for="(responsibility, index) in cardContent.responsibilities"
              v-text="responsibility"
              :key="index"
            ></p>
          </div>
          <div class="col-12 mt-3">
            <h5 class="small text-white text-uppercase">Worth to mention:</h5>
            <ul v-if="Array.isArray(cardContent.highlights)">
              <li class="my-0" v-for="(highlights, index) in cardContent.highlights" :key="index">
                {{ highlights }}
              </li>
            </ul>
            <p v-else v-text="cardContent.highlights"></p>
          </div>
        </div>
      </div>
    </div>
  </div>
</template>
