<script setup lang="ts">
import NavBar from '@/components/NavBar.vue'
import { useMainStore } from '@/stores/main'
import { storeToRefs } from 'pinia'

const { ssot, loading, error } = storeToRefs(useMainStore())
const { fetchPageData } = useMainStore()

fetchPageData()
</script>

<template>
  <main v-if="!loading">
    <section>
      <NavBar />
    </section>
    <section>
      <RouterView />
    </section>
    <section>
      <div class="col-12 text-center" v-if="ssot.settings">
        Engine: <span class="text-white-50">{{ ssot.settings.engine_version }}</span> | Data rev:
        <span class="text-white-50">{{ ssot.settings.data_revision }}</span> | Last Updated:
        <span class="text-white-50">{{ ssot.settings.data_last_updated }}</span>
      </div>
    </section>
  </main>
</template>
